<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GroceryMart</title>
   <link rel="stylesheet" href="style.css">
 
<script>
    // App State
    let appState = {
        pincode: null,
        currentPage: 'home',
        cart: [],
        searchQuery: '',
        selectedCategory: 'all',
        products: [],
        currentProduct: null,
        user: null
    };

    // Initialize
    window.addEventListener('DOMContentLoaded', () => {
        loadFromLocalStorage();
        initializeProducts();
        showPage('home');
        updateCartCount();
        checkPincode();
    });

    // Load data from localStorage
    function loadFromLocalStorage() {
        const saved = localStorage.getItem('appState');
        if (saved) {
            const savedState = JSON.parse(saved);
            appState.pincode = savedState.pincode;
            appState.cart = savedState.cart || [];
            appState.user = savedState.user;
        }
    }

    // Save to localStorage
    function saveToLocalStorage() {
        localStorage.setItem('appState', JSON.stringify({
            pincode: appState.pincode,
            cart: appState.cart,
            user: appState.user
        }));
    }

    // Initialize Products Database
    function initializeProducts() {
        appState.products = [
            // Vegetables
            { id: 1, name: 'Tomato', price: 40, category: 'vegetables', emoji: '<img src="src/Tamato.jpg">', desc: 'Fresh red tomatoes' },
            { id: 2, name: 'Onion', price: 30, category: 'vegetables', emoji: '<img src="src/Onion.jpg">', desc: 'Fresh onions' },
            { id: 3, name: 'Potato', price: 25, category: 'vegetables', emoji: '<img src="src/Patato.jpg">', desc: 'Fresh potatoes' },
            { id: 4, name: 'Carrot', price: 35, category: 'vegetables', emoji: '<img src="src/Carrot.jpg">', desc: 'Fresh carrots' },
            { id: 5, name: 'Broccoli', price: 60, category: 'vegetables', emoji: '<img src="src/Brokali.jpg">', desc: 'Fresh broccoli' },
            { id: 6, name: 'Spinach', price: 50, category: 'vegetables', emoji: '<img src="src/Palak.jpg">', desc: 'Fresh spinach' },
           { id: 1, name: 'Tomato', price: 40, category: 'vegetables', emoji: '<img src="src/Tamato.jpg">', desc: 'Fresh red tomatoes' },
            { id: 2, name: 'Onion', price: 30, category: 'vegetables', emoji: '<img src="src/Onion.jpg">', desc: 'Fresh onions' },
            { id: 3, name: 'Potato', price: 25, category: 'vegetables', emoji: '<img src="src/Patato.jpg">', desc: 'Fresh potatoes' },
            { id: 4, name: 'Carrot', price: 35, category: 'vegetables', emoji: '<img src="src/Carrot.jpg">', desc: 'Fresh carrots' },
            { id: 5, name: 'Broccoli', price: 60, category: 'vegetables', emoji: '<img src="src/Brokali.jpg">', desc: 'Fresh broccoli' },
            { id: 6, name: 'Spinach', price: 50, category: 'vegetables', emoji: '<img src="src/Palak.jpg">', desc: 'Fresh spinach' },
           { id: 1, name: 'Tomato', price: 40, category: 'vegetables', emoji: '<img src="src/Tamato.jpg">', desc: 'Fresh red tomatoes' },
            { id: 2, name: 'Onion', price: 30, category: 'vegetables', emoji: '<img src="src/Onion.jpg">', desc: 'Fresh onions' },
            { id: 3, name: 'Potato', price: 25, category: 'vegetables', emoji: '<img src="src/Patato.jpg">', desc: 'Fresh potatoes' },
            { id: 4, name: 'Carrot', price: 35, category: 'vegetables', emoji: '<img src="src/Carrot.jpg">', desc: 'Fresh carrots' },
            { id: 5, name: 'Broccoli', price: 60, category: 'vegetables', emoji: '<img src="src/Brokali.jpg">', desc: 'Fresh broccoli' },
            { id: 6, name: 'Spinach', price: 50, category: 'vegetables', emoji: '<img src="src/Palak.jpg">', desc: 'Fresh spinach' },
           { id: 1, name: 'Tomato', price: 40, category: 'vegetables', emoji: '<img src="src/Tamato.jpg">', desc: 'Fresh red tomatoes' },
            { id: 2, name: 'Onion', price: 30, category: 'vegetables', emoji: '<img src="src/Onion.jpg">', desc: 'Fresh onions' },
            { id: 3, name: 'Potato', price: 25, category: 'vegetables', emoji: '<img src="src/Patato.jpg">', desc: 'Fresh potatoes' },
            { id: 4, name: 'Carrot', price: 35, category: 'vegetables', emoji: '<img src="src/Carrot.jpg">', desc: 'Fresh carrots' },
            { id: 5, name: 'Broccoli', price: 60, category: 'vegetables', emoji: '<img src="src/Brokali.jpg">', desc: 'Fresh broccoli' },
            { id: 6, name: 'Spinach', price: 50, category: 'vegetables', emoji: '<img src="src/Palak.jpg">', desc: 'Fresh spinach' },
            // Fruits
            { id: 7, name: 'Apple', price: 100, category: 'fruits', emoji: '<img src="src/Apple.jpg">', desc: 'Fresh apples' },
            { id: 8, name: 'Banana', price: 45, category: 'fruits', emoji: '<img src="src/Banana.webp">', desc: 'Fresh bananas' },
            { id: 9, name: 'Orange', price: 60, category: 'fruits', emoji: '<img src="src/Orange.jpg">', desc: 'Fresh oranges' },
            { id: 10, name: 'Mango', price: 120, category: 'fruits', emoji: '<img src="src/mango.jpg">', desc: 'Fresh mangoes' },
            { id: 11, name: 'Watermelon', price: 150, category: 'fruits', emoji: '<img src="src/Vagetables.png">', desc: 'Fresh watermelon' },
            { id: 12, name: 'Strawberry', price: 80, category: 'fruits', emoji: '<img src="src/Vagetables.png">', desc: 'Fresh strawberries' },
            // Dairy
            { id: 13, name: 'Milk', price: 55, category: 'dairy', emoji: 'ü•õ', desc: '1L Fresh Milk' },
            { id: 14, name: 'Yogurt', price: 40, category: 'dairy', emoji: 'ü•õ', desc: 'Fresh yogurt' },
            { id: 15, name: 'Cheese', price: 150, category: 'dairy', emoji: 'üßÄ', desc: 'Cheddar cheese' },
            { id: 16, name: 'Butter', price: 180, category: 'dairy', emoji: 'üßà', desc: 'Pure butter' },
            { id: 17, name: 'Paneer', price: 200, category: 'dairy', emoji: 'üßÄ', desc: 'Fresh paneer' },
            { id: 18, name: 'Ghee', price: 300, category: 'dairy', emoji: 'üßà', desc: 'Pure ghee' },
            // Grocery
            { id: 19, name: 'Rice', price: 400, category: 'grocery', emoji: 'üçö', desc: '1kg Rice' },
            { id: 20, name: 'Flour', price: 35, category: 'grocery', emoji: 'üåæ', desc: '1kg Flour' },
            { id: 21, name: 'Dal', price: 90, category: 'grocery', emoji: 'ü´ò', desc: '1kg Dal' },
            { id: 22, name: 'Oil', price: 180, category: 'grocery', emoji: 'ü´ó', desc: '1L Cooking Oil' },
            { id: 23, name: 'Salt', price: 20, category: 'grocery', emoji: 'üßÇ', desc: 'Table salt' },
            { id: 24, name: 'Sugar', price: 45, category: 'grocery', emoji: 'üçØ', desc: '1kg Sugar' },
            // Beverages
            { id: 25, name: 'Tea', price: 150, category: 'beverages', emoji: 'ü´ñ', desc: 'Premium tea' },
            { id: 26, name: 'Coffee', price: 200, category: 'beverages', emoji: '‚òï', desc: 'Premium coffee' },
            { id: 27, name: 'Juice', price: 80, category: 'beverages', emoji: 'üßÉ', desc: 'Fresh juice' },
            { id: 28, name: 'Water Bottle', price: 50, category: 'beverages', emoji: 'üíß', desc: '1L Water' },
            { id: 29, name: 'Soft Drink', price: 40, category: 'beverages', emoji: 'ü•§', desc: '500ml Soda' },
            { id: 30, name: 'Coconut Water', price: 60, category: 'beverages', emoji: 'ü••', desc: 'Fresh coconut water' }
        ];
    }

    // Check Pincode on Load
    function checkPincode() {
        if (!appState.pincode) {
            showModal('pincodeModal');
        } else {
            updatePincodeDisplay();
        }
    }

    // Show/Hide Pages
    function showPage(pageName) {
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        document.getElementById(pageName + 'Section').classList.add('active');
        
        document.querySelectorAll('.nav-menu button').forEach(b => b.classList.remove('active'));
        const activeBtn = document.querySelector(`[data-page="${pageName}"]`);
        if (activeBtn) activeBtn.classList.add('active');
        
        appState.currentPage = pageName;
        
        if (pageName === 'home') renderHome();
        if (pageName === 'products') renderProducts();
        if (pageName === 'cart') renderCart();
        if (pageName === 'checkout') renderCheckout();
        if (pageName === 'account') renderAccount();
        if (pageName === 'orders') renderOrders();
        if (pageName === 'productDetail') renderProductDetail();
    }

    // Modal Functions
    function showModal(modalId) {
        document.getElementById(modalId).classList.add('active');
    }

    function closeModal(modalId) {
        document.getElementById(modalId).classList.remove('active');
    }

    // Pincode Functions
    function setPincode() {
        const input = document.getElementById('pincodeInput');
        const pincode = input.value.trim();
        
        if (!/^\d{6}$/.test(pincode)) {
            alert('Please enter a valid 6-digit pincode');
            return;
        }

        // Simulate service availability check
        const serviceableAreas = ['335702', '335703', '110003', '110004', '110005', '400001', '400002', '560001', '560002', '560003', '800001'];
        const available = serviceableAreas.includes(pincode);

        if (available) {
            appState.pincode = pincode;
            saveToLocalStorage();
            updatePincodeDisplay();
            closeModal('pincodeModal');
            renderHome();
        } else {
            alert('Service not available in this area. Try: 335702, 335703, 560001, 800001');
        }
    }

    function updatePincodeDisplay() {
    const display = document.querySelector('.pincode-display');
    if (display) {
        display.innerHTML = `
            <img src="src/Location.png" width="20">
            ${appState.pincode}
        `;
    }
}


    function changePincode() {
        showModal('pincodeModal');
    }

    // Product Functions
    function renderHome() {
        const home = document.getElementById('homeContent');
        home.innerHTML = `
            <div class="offers-section">
                <h2>üéâ Special Offers</h2>
                <div class="offers-grid">
                    <div class="offer-card">
                        <h3>Fresh Produce</h3>
                        <p>Up to 30% Off</p>
                    </div>
                    <div class="offer-card">
                        <h3>Dairy Items</h3>
                        <p>Buy 2 Get 1 Free</p>
                    </div>
                    <div class="offer-card">
                        <h3>Grocery</h3>
                        <p>Flat ‚Çπ100 Off</p>
                    </div>
                    <div class="offer-card">
                        <h3>Fast Delivery</h3>
                        <p>Same Day Delivery</p>
                    </div>
                </div>
            </div>

            <div class="offers-section">
                <h2>üõí Shop by Category</h2>
                <div class="categories-grid">
                    <div class="category-card" onclick="filterByCategory('vegetables')">
                        <div class="category-emoji"><img src="src/Vagetables.png"></div>
                        <div class="category-name">Vegetables</div>
                    </div>
                    <div class="category-card" onclick="filterByCategory('fruits')">
                        <div class="category-emoji"><img src="src/Vagetables.png"></div>
                        <div class="category-name">Fruits</div>
                    </div>
                    <div class="category-card" onclick="filterByCategory('dairy')">
                        <div class="category-emoji"><img src="src/Vagetables.png"></div>
                        <div class="category-name">Dairy</div>
                    </div>
                    <div class="category-card" onclick="filterByCategory('grocery')">
                        <div class="category-emoji"><img src="src/Vagetables.png"></div>
                        <div class="category-name">Grocery</div>
                    </div>
                    <div class="category-card" onclick="filterByCategory('beverages')">
                        <div class="category-emoji"><img src="src/Vagetables.png"></div>
                        <div class="category-name">Beverages</div>
                    </div>
                    <div class="category-card" onclick="filterByCategory('all')">
                        <div class="category-emoji"><img src="src/Vagetables.png"></div>
                        <div class="category-name">All Items</div>
                    </div>
                </div>
            </div>

            <div class="offers-section">
                <h2>üî• Trending Now</h2>
                <div class="products-grid">
                    ${appState.products.slice(0, 8).map(product => `
                        <div class="product-card">
                            <div class="product-image">${product.emoji}</div>
                            <div class="product-info">
                                <div class="product-name">${product.name}</div>
                                <div class="product-price">‚Çπ${product.price}</div>
                                <div class="product-actions">
                                    <button class="view-details-btn" onclick="viewProduct(${product.id})">View</button>
                                    <button class="add-to-cart-btn" onclick="addToCart(${product.id})">Add</button>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }

    function filterByCategory(category) {
        appState.selectedCategory = category;
        showPage('products');
    }

    function renderProducts() {
        const products = appState.selectedCategory === 'all' 
            ? appState.products 
            : appState.products.filter(p => p.category === appState.selectedCategory);

        const section = document.getElementById('productsSection');
        section.innerHTML = `
            <div class="container">
                <h1>${appState.selectedCategory === 'all' ? 'All Products' : appState.selectedCategory.charAt(0).toUpperCase() + appState.selectedCategory.slice(1)}</h1>
                
                <div class="products-grid">
                    ${products.map(product => `
                        <div class="product-card">
                            <div class="product-image">${product.emoji}</div>
                            <div class="product-info">
                                <div class="product-name">${product.name}</div>
                                <div class="product-price">‚Çπ${product.price}</div>
                                <div class="product-actions">
                                    <button class="view-details-btn" onclick="viewProduct(${product.id})">View</button>
                                    <button class="add-to-cart-btn" onclick="addToCart(${product.id})">Add</button>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }

    function viewProduct(productId) {
        appState.currentProduct = appState.products.find(p => p.id === productId);
        showPage('productDetail');
    }

    function renderProductDetail() {
        if (!appState.currentProduct) return;
        const product = appState.currentProduct;
        const section = document.getElementById('productDetailSection');
        
        section.innerHTML = `
            <div class="container">
                <button class="btn-secondary" onclick="showPage('products')" style="margin-bottom: 1rem;">‚Üê Back</button>
                <div class="product-detail">
                    <div class="product-detail-image">${product.emoji}</div>
                    <div class="product-detail-info">
                        <h1>${product.name}</h1>
                        <div class="product-detail-price">‚Çπ${product.price}</div>
                        <div class="product-detail-desc">${product.desc}</div>
                        
                        <div class="product-detail-actions">
                            <input type="number" id="detailQuantity" class="quantity-input" value="1" min="1" max="100">
                            <button class="btn-primary" onclick="addToCartFromDetail()">Add to Cart</button>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    function addToCartFromDetail() {
        const qty = parseInt(document.getElementById('detailQuantity').value);
        for (let i = 0; i < qty; i++) {
            addToCart(appState.currentProduct.id);
        }
        showPage('cart');
    }

    // Cart Functions
    function addToCart(productId) {
        const product = appState.products.find(p => p.id === productId);
        const existing = appState.cart.find(item => item.id === productId);
        
        if (existing) {
            existing.qty += 1;
        } else {
            appState.cart.push({...product, qty: 1});
        }
        
        saveToLocalStorage();
        updateCartCount();
        showNotification('Added to cart!');
    }

    function removeFromCart(productId) {
        appState.cart = appState.cart.filter(item => item.id !== productId);
        saveToLocalStorage();
        updateCartCount();
        renderCart();
    }

    function updateQuantity(productId, delta) {
        const item = appState.cart.find(i => i.id === productId);
        if (item) {
            item.qty += delta;
            if (item.qty <= 0) {
                removeFromCart(productId);
            } else {
                saveToLocalStorage();
                renderCart();
            }
        }
    }

    function updateCartCount() {
        const count = appState.cart.reduce((sum, item) => sum + item.qty, 0);
        const cartCount = document.querySelector('.cart-count');
        if (cartCount) {
            cartCount.textContent = count;
            cartCount.style.display = count > 0 ? 'flex' : 'none';
        }
    }

    function renderCart() {
        const section = document.getElementById('cartSection');
        const total = appState.cart.reduce((sum, item) => sum + (item.price * item.qty), 0);

        if (appState.cart.length === 0) {
            section.innerHTML = `
                <div class="container">
                    <div class="empty-state">
                        <div class="empty-state-icon">üõí</div>
                        <h2>Your cart is empty</h2>
                        <p>Add items to get started!</p>
                        <button class="btn-primary" onclick="showPage('home')" style="margin-top: 1rem;">Continue Shopping</button>
                    </div>
                </div>
            `;
            return;
        }

        section.innerHTML = `
            <div class="container">
                <h1>Shopping Cart</h1>
                <div class="cart-items-list">
                    ${appState.cart.map(item => `
                        <div class="cart-item">
                            <div style="font-size: 2rem; margin-right: 1rem;">${item.emoji}</div>
                            <div class="cart-item-info">
                                <div class="cart-item-name">${item.name}</div>
                                <div class="cart-item-price">‚Çπ${item.price} each</div>
                            </div>
                            <div class="cart-item-actions">
                                <div class="quantity-selector">
                                    <button onclick="updateQuantity(${item.id}, -1)">‚àí</button>
                                    <span>${item.qty}</span>
                                    <button onclick="updateQuantity(${item.id}, 1)">+</button>
                                </div>
                                <strong style="margin: 0 1rem;">‚Çπ${item.price * item.qty}</strong>
                                <button class="remove-btn" onclick="removeFromCart(${item.id})">Remove</button>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div class="cart-summary">
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span>‚Çπ${total}</span>
                    </div>
                    <div class="summary-row">
                        <span>Delivery:</span>
                        <span>‚Çπ0 (Free)</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span>‚Çπ${total}</span>
                    </div>
                    <button class="btn-primary" onclick="showPage('checkout')" style="width: 100%; margin-top: 1rem; padding: 1rem;">Proceed to Checkout</button>
                </div>
            </div>
        `;
    }

    // Checkout Functions
    function renderCheckout() {
        const total = appState.cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
        const section = document.getElementById('checkoutSection');

        section.innerHTML = `
            <div class="container">
                <h1>Checkout</h1>
                <div style=" ">
                    <div>
                        <h2>Delivery Address</h2>
                        <form onsubmit="submitOrder(event)">
                            <div class="form-group">
                                <label>Full Name</label>
                                <input type="text" id="fullName" required>
                            </div>
                            <div class="form-group">
                                <label>Phone Number</label>
                                <input type="tel" id="phone" pattern="[0-9]{10}" required>
                            </div>
                            <div class="form-group">
                                <label>Address</label>
                                <textarea id="address" required></textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>City</label>
                                    <input type="text" id="city" required>
                                </div>
                                <div class="form-group">
                                    <label>Pincode</label>
                                    <input type="text" id="pincode" value="${appState.pincode}" readonly>
                                </div>
                            </div>

                            <h2 style="margin-top: 2rem;">Delivery Option</h2>
                            <div class="form-group">
                                <label>
                                    <input type="radio" name="delivery" value="home" checked> Home Delivery
                                </label>
                                <label>
                                    <input type="radio" name="delivery" value="store"> Store Pickup
                                </label>
                            </div>

                            <button type="submit" class="btn-primary" style="width: 100%; padding: 1rem; margin-top: 1rem;">Place Order</button>
                        </form>
                    </div>

                    <div>
                        <h2>Order Summary</h2>
                        <div class="cart-summary">
                            ${appState.cart.map(item => `
                                <div class="summary-row">
                                    <span>${item.name} x${item.qty}</span>
                                    <span>‚Çπ${item.price * item.qty}</span>
                                </div>
                            `).join('')}
                            <div class="summary-row total">
                                <span>Total Amount</span>
                                <span>‚Çπ${total}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    function submitOrder(event) {
        event.preventDefault();
        
        const name = document.getElementById('fullName').value;
        const phone = document.getElementById('phone').value;
        const address = document.getElementById('address').value;
        const city = document.getElementById('city').value;
        const delivery = document.querySelector('input[name="delivery"]:checked').value;

        const order = {
            id: 'ORD' + Date.now(),
            date: new Date().toLocaleDateString(),
            items: appState.cart,
            total: appState.cart.reduce((sum, item) => sum + (item.price * item.qty), 0),
            status: 'processing',
            customer: { name, phone, address, city, delivery }
        };

        let orders = JSON.parse(localStorage.getItem('orders') || '[]');
        orders.push(order);
        localStorage.setItem('orders', JSON.stringify(orders));

        appState.cart = [];
        saveToLocalStorage();
        updateCartCount();

        showNotification('Order placed successfully!');
        setTimeout(() => showPage('orders'), 1000);
    }

    // Account Functions
    function renderAccount() {
        const section = document.getElementById('accountSection');
        section.innerHTML = `
            <div class="container">
                <h1>My Account</h1>
                <div style="background: white; border-radius: 8px; padding: 2rem; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);">
                    <h2 style="margin-bottom: 1rem;">Profile Information</h2>
                    <form onsubmit="updateProfile(event)">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" id="accountName" value="${appState.user?.name || ''}" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="accountEmail" value="${appState.user?.email || ''}" required>
                        </div>
                        <div class="form-group">
                            <label>Phone</label>
                            <input type="tel" id="accountPhone" value="${appState.user?.phone || ''}" pattern="[0-9]{10}" required>
                        </div>
                        <button type="submit" class="btn-primary">Save Changes</button>
                    </form>

                    <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Saved Addresses</h2>
                    <div id="savedAddresses" style="background: #f5f5f5; padding: 1rem; border-radius: 4px;">
                        <p>No saved addresses yet.</p>
                    </div>

                    <button class="btn-secondary" style="margin-top: 1rem;" onclick="logout()">Logout</button>
                </div>
            </div>
        `;
    }

    function updateProfile(event) {
        event.preventDefault();
        appState.user = {
            name: document.getElementById('accountName').value,
            email: document.getElementById('accountEmail').value,
            phone: document.getElementById('accountPhone').value
        };
        saveToLocalStorage();
        showNotification('Profile updated!');
    }

    function logout() {
        appState.user = null;
        saveToLocalStorage();
        showPage('home');
        showNotification('Logged out!');
    }

    // Orders Functions
    function renderOrders() {
        const section = document.getElementById('ordersSection');
        const orders = JSON.parse(localStorage.getItem('orders') || '[]');

        if (orders.length === 0) {
            section.innerHTML = `
                <div class="container">
                    <div class="empty-state">
                        <div class="empty-state-icon">üì¶</div>
                        <h2>No orders yet</h2>
                        <p>Start shopping to place an order!</p>
                        <button class="btn-primary" onclick="showPage('home')" style="margin-top: 1rem;">Continue Shopping</button>
                    </div>
                </div>
            `;
            return;
        }

        section.innerHTML = `
            <div class="container">
                <h1>My Orders</h1>
                ${orders.reverse().map(order => `
                    <div class="order-card">
                        <div class="order-header">
                            <div>
                                <div class="order-id">${order.id}</div>
                                <div style="color: #666; font-size: 0.9rem;">Ordered on ${order.date}</div>
                            </div>
                            <span class="order-status status-${order.status}">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            ${order.items.map(item => `
                                <div style="display: flex; justify-content: space-between; padding: 0.5rem 0;">
                                    <span>${item.name} x${item.qty}</span>
                                    <span>‚Çπ${item.price * item.qty}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div style="border-top: 1px solid #eee; padding-top: 1rem; font-weight: bold; display: flex; justify-content: space-between;">
                            <span>Total:</span>
                            <span>‚Çπ${order.total}</span>
                        </div>
                        <div style="margin-top: 1rem; font-size: 0.9rem; color: #666;">
                            Delivery to: ${order.customer.address}, ${order.customer.city}
                        </div>
                    </div>
                `).join('')}
            </div>
        `;
    }

    // Search Function
    function search() {
const query = document.getElementById('searchInput').value.trim().toLowerCase();
if (!query) return;

appState.searchQuery = query;

const filtered = appState.products.filter(p =>
    p.name.toLowerCase().includes(query)
);

const section = document.getElementById('productsSection');

section.innerHTML = `
    <div class="container">
        <h1>Search Results for "${query}"</h1>

        ${
            filtered.length === 0
            ? `<div class="empty-state">
                    <div class="empty-state-icon">üîç</div>
                    <h2>No products found</h2>
                    <p>Try a different keyword</p>
               </div>`
            : `<div class="products-grid">
                    ${filtered.map(product => `
                        <div class="product-card">
                            <div class="product-image">${product.emoji}</div>
                            <div class="product-info">
                                <div class="product-name">${product.name}</div>
                                <div class="product-price">‚Çπ${product.price}</div>
                                <div class="product-actions">
                                    <button class="view-details-btn" onclick="viewProduct(${product.id})">View</button>
                                    <button class="add-to-cart-btn" onclick="addToCart(${product.id})">Add</button>
                                </div>
                            </div>
                        </div>
                    `).join('')}
               </div>`
        }
    </div>
`;

// ‚úÖ ONLY show section, do NOT re-render products
document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
document.getElementById('productsSection').classList.add('active');

// nav active
document.querySelectorAll('.nav-menu button').forEach(b => b.classList.remove('active'));
const btn = document.querySelector('[data-page="products"]');
if (btn) btn.classList.add('active');

appState.currentPage = 'products';
}


    // Cart Icon Click
    function goToCart() {
        showPage('cart');
    }

    // Notification
    function showNotification(message) {
        const notif = document.createElement('div');
        notif.style.cssText = `
            position: fixed;
            top: 80px;
            right: 20px;
            background: #34a853;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            z-index: 2000;
            animation: slideIn 0.3s ease-out;
        `;
        notif.textContent = message;
        document.body.appendChild(notif);

        setTimeout(() => notif.remove(), 3000);
    }

    // Add animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    `;
    document.head.appendChild(style);
</script>
</head>
<body>
<!-- Header -->
<header>
    <div class="header-content">
        <div class="logo" onclick="showPage('home')">üõí GroceryMart</div>
        <div class="header-actions">
            <div class="pincode-display" onclick="changePincode()">üìçLoading...</div>
            <div class="cart-icon" onclick="goToCart()">
                üõí
                <div class="cart-count" style="display: none;">0</div>
            </div>
        </div>
    </div>
</header>

<!-- Navigation -->
<nav>
    <ul class="nav-menu">
        <li><button data-page="home" onclick="showPage('home')" class="active">Home</button></li>
        <li><button data-page="products" onclick="showPage('products')">Shop</button></li>
        <li><button data-page="cart" onclick="showPage('cart')">Cart</button></li>
        <li><button data-page="account" onclick="showPage('account')">Account</button></li>
        <li><button data-page="orders" onclick="showPage('orders')">Orders</button></li>
    </ul>
</nav>

<!-- Search Bar -->
<div class="search-container">
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search for products..." onkeypress="if(event.key === 'Enter') search()">
        <button onclick="search()">Search</button>
    </div>
</div>

<!-- Home Section -->
<section id="homeSection">
    <div class="container" id="homeContent">
        <div class="empty-state">Loading...</div>
    </div>
</section>

<!-- Products Section -->
<section id="productsSection">
    <div class="container">Loading...</div>
</section>

<!-- Product Detail Section -->
<section id="productDetailSection">
    <div class="container">Loading...</div>
</section>

<!-- Cart Section -->
<section id="cartSection">
    <div class="container">Loading...</div>
</section>

<!-- Checkout Section -->
<section id="checkoutSection">
    <div class="container">Loading...</div>
</section>

<!-- Account Section -->
<section id="accountSection">
    <div class="container">Loading...</div>
</section>

<!-- Orders Section -->
<section id="ordersSection">
    <div class="container">Loading...</div>
</section>

<!-- Pincode Modal -->
<div id="pincodeModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <span>Select Delivery Location</span>
            <button class="close-btn" onclick="closeModal('pincodeModal')">√ó</button>
        </div>
        <form class="pincode-form" onsubmit="setPincode(); return false;">
            <input 
                type="text" 
                id="pincodeInput" 
                placeholder="Enter 6-digit pincode" 
                maxlength="6" 
                pattern="[0-9]{6}"
                required
            >
            <div style="font-size: 0.9rem; color: #666; margin: 0.5rem 0;">
                Try: 110001, 400001, 560001, 800001
            </div>
            <button type="submit" class="btn-primary">Continue</button>
        </form>
    </div>
</div>

<!-- Footer -->
<footer>
    <div class="footer-content">
        <div class="footer-section">
            <h3>About Us</h3>
            <ul>
                <li><a href="#" onclick="event.preventDefault(); alert('About GroceryMart - Your trusted online grocery store.');">Who We Are</a></li>
                <li><a href="#" onclick="event.preventDefault(); alert('We deliver fresh groceries to your doorstep.');">Our Mission</a></li>
                <li><a href="#" onclick="event.preventDefault(); alert('Founded in 2024');">Our Story</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>Quick Links</h3>
            <ul>
                <li><a href="#" onclick="event.preventDefault(); showPage('home');">Home</a></li>
                <li><a href="#" onclick="event.preventDefault(); showPage('products');">Shop</a></li>
                <li><a href="#" onclick="event.preventDefault(); showPage('orders');">Orders</a></li>
                <li><a href="#" onclick="event.preventDefault(); showPage('account');">Account</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>Policies</h3>
            <ul>
                <li><a href="#" onclick="event.preventDefault(); alert('Terms: Use our service responsibly and legally.');">Terms & Conditions</a></li>
                <li><a href="#" onclick="event.preventDefault(); alert('Privacy: We protect your personal information.');">Privacy Policy</a></li>
                <li><a href="#" onclick="event.preventDefault(); alert('Refund: 7 days money-back guarantee.');">Return Policy</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>Contact</h3>
            <ul>
                <li><a href="tel:+91-1234567890">üìû +91-1234567890</a></li>
                <li><a href="mailto:support@grocerymart.com">‚úâÔ∏è support@grocerymart.com</a></li>
                <li><a href="#" onclick="event.preventDefault(); alert('Address: 123 Market Street, Delhi');"><img src="https://freepngimg.com/svg/image/map/142423-map-location-pin-in-red-color.svg"> Delhi, India</a></li>
            </ul>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; 2024 GroceryMart. All rights reserved. | Made with ‚ù§Ô∏è</p>
    </div>
</footer>
</body>
</html>
